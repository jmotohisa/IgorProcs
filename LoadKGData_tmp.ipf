#pragma rtGlobals=1		// Use modern global access method.#include <Strings as Lists>Macro LoadAllKGData(pathName,startindex)	String pathName	Variable startindex	Prompt pathName,"Path Name"	Prompt startindex,"startindex"		Silent 1; PauseUpDate		String fileName	Variable index=startindex,index0=0		if(strlen(pathName)==0)		NewPath/O temporaryPath		pathName = "temporaryPath"	endif		do		fileName = IndexedFile($pathName, index0,"QDAT")		print pathname,fileName		if(strlen(fileName)==0)			break		endif		LoadKGData(fileName,pathName,index)|		if(strlen(S_waveNames)>0)|		endif		index +=1		index0 +=1	while(1)		if(Exists("temporaryPath"))		KillPath temporaryPath	endifEndMacro LoadKGData(fileName,pathName,index)	String fileName	String pathName="home"	Variable index=0	Prompt fileName,"File Name"	Prompt pathName,"Path Name"	Prompt index,"index"		Silent 1; PauseUpDate		String w0,w1,w2,w3,w4,Id,Vg	KGLoad/A=data/P=$pathname $fileName	id = "id" + num2istr(index)	Vg = "Vgate" + num2istr(index)|	w0 = GetStrFromList(S_waveNames,0,",")|	w1 = GetStrFromList(S_waveNames,1,",")|	w2 = GetStrFromList(S_waveNames,2,",")|	w3 = GetStrFromList(S_waveNames,3,",")|	w4 = GetStrFromList(S_waveNames,4,",")|	print id,Vg,w0,w1,w2	Rename $("data0"),$Vg	Rename $("data4"),$Id	Sort $Vg, $Vg, $Id	WaveStats/Q $Vg|	print "index = ", index,"V_min =",V_min,"V_max =",V_max	SetScale/I x,V_min,V_max,"V",$Id	KillWaves $Vg,$("data1"),$("data2"),$("data3")End Macro