#pragma rtGlobals=1		// Use modern global access method.Macro LoadTDSData(filename,pathName,wavename)	String filename	String pathName = "home",wavename		Silent 1;PauseUpdate		String wform,buffer	Variable ndat,dt,tp,sp,ref		if (strlen(fileName)<=0)		Open /D/R/P=$pathName/T="sGBWTEXT" ref		fileName= S_fileName	endif	print filename	Open /R/P=$pathName/T="sGBWTEXT" ref as fileName	FReadLine ref,buffer	ndat=str2num(buffer)	FReadLine ref,buffer	dt=str2num(buffer)	FReadLine ref,buffer	tp=str2num(buffer)	FReadLine ref,buffer	sp=str2num(buffer)	Close ref		LoadWave/G/D/A/W/L={0,4,ndat,0,0}/P=$pathName fileName	wform = GetStrFromList(S_waveNames,0,";")		SetScale/P x 0,dt,"sec", $wform;DelayUpdate	SetScale d 0,0,"V", $wform		if (strlen(waveName)<1)		waveName="W"+wname(fileName)	endif	Rename $wform,$waveNameEnd MacroMacro LoadAllTDSData(pathName)	String pathName="_New Path_"	Prompt pathName, "Name of path containing text files", popup PathList("*", ";", "")+"_New Path_"	Silent 1; PauseUpDate		String fileName,ftype="TEXT",wavename	Variable index=0		if(CmpStr(pathName, "_New Path_") == 0)		NewPath/O temporaryPath		PathName = "temporaryPath"	endif		do		fileName = IndexedFile($pathName, index,"TEXT")		if(strlen(fileName)==0)			break		endif		LoadTDSData(filename,pathName,wavename)		index +=1	while(1)		if(Exists("temporaryPath"))		KillPath temporaryPath	endifEnd