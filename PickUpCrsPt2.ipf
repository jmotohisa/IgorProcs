#pragma rtGlobals=1		// Use modern global access method.// PickUpCrsPt2.ipf// pickup x and y values from multiple waves in a graph//	05/10/26 ver. 0.2 by J. Motohisa////	revision history//		?/?/?		ver 0.1	first version (named as loadSPEdata.ipf)//		05/10/26- ver 0.2//		18/07/30		ver 0.2a: Most macro are converted to function////Menu "Macros"	"-"	"Initialize Pickup/0", InitPickupCsrPt()	"Pickup Cursol Point/2", PickupCsrPt()	"Delete Previous Point/3",DeletePickupCsrPt()	"Display Pickup Results/4",DispPickup()	"Append Pickup Results/5",AppendPickup()	"Edit Pickup Results/6",EditPickup()	"-"EndProc DefineGrobal_PickupCsrPt()	String/G g_graphname, g_destwx,g_destwy,g_destwn	Variable/G g_numpointsEndProc InitPickupCsrPt(graphname,destwx,destwy,destwn,ftflag)	String graphname,destwx="destx",destwy="desty",destwn="nameofx"	Variable ftflag=1	Prompt graphname,"Graph pickup cursol point",popup,WinList("*",";","WIN:1")//	Prompt ywave,"Y wave name",popup,WaveList("*",";","WIN:"+graphname)//	Prompt xwave,"x wave name",popup,"_Calculation;"+WaveList("*",";","WIN:"+graphname)	Prompt destwx,"Destination wave for x-value"	Prompt destwy,"Destination wave for y-value"	Prompt destwn,"oringal wave name"	Prompt ftflag,"Show Table ?",popup,"yes;no"	PauseUpdate; Silent 1		String xwave//	if(strlen(VariableList("g_numpoints",";",4))==0)		DefineGrobal_PickupCsrPt()//	endif	DoWindow/F graphname	ShowInfo//	xwave = xWaveName("",ywave)//	if(strlen(xwave)==0)//		Cursor/P A,$ywave,leftx($ywave)//	endif		Make/D/O/N=1 $destwx,$destwy	Make/T/O/N=1 $destwn		g_graphname = graphname//	g_ywave = ywave//	g_xwave = xwave	g_destwx = destwx	g_destwy = destwy	g_destwn = destwn	g_numpoints = 0	if(ftflag==1)		EditPickup()	endifEnd ProcFunction PickupCsrPt()	NVAR g_numpoints	SVAR g_destwn,g_destwx,g_destwy	PauseUpdate; Silent 1	Wave destwx=$g_destwx	Wave destwy=$g_destwy	Wave/T destwn=$g_destwn	g_numpoints +=1	Redimension/N=(g_numpoints) destwx	Redimension/N=(g_numpoints) destwy	Redimension/N=(g_numpoints) destwn	destwx[g_numpoints-1] = hcsr(A)	destwy[g_numpoints-1] = vcsr(A)	destwn[g_numpoints-1] = CsrWave(A)EndFunction DeletePickupCsrPt()//	PauseUpdate; Silent 1	SVAR g_destwn,g_destwx,g_destwy	NVAR g_numpoints	if(g_numpoints>=2)		g_numpoints -=1		Redimension/N=(g_numpoints) $g_destwx		Redimension/N=(g_numpoints) $g_destwy		Redimension/N=(g_numpoints) $g_destwn	endifEnd MacroFunction DispPickup()	SVAR g_destwx,g_destwy	Display $g_destwy vs $g_destwx	ModifyGraph mode=3,marker=19EndFunction/s xWaveOfTrace(graphname,ywave,instance) // return x-wave name of the trace	String graphname,ywave	Variable instance		String info = TraceInfo(graphname,ywave,instance),xwave=""	Variable st	st = strsearch(info,";",0)	if(st==6)		return xwave	endif	xwave = info[6,st-1]	return xwaveEndFunction EditPickup()	SVAR g_destwn,g_destwx,g_destwy	Edit $g_destwn,$g_destwx,$g_destwyEndFunction AppendPickup()//	String ywvname,xwvname		SVAR g_destwx,g_destwy	AppendToGraph $g_destwy vs $g_destwx	ModifyGraph mode($g_destwy)=4,msize($g_destwy)=3,marker($g_destwy)=19End