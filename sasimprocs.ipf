#pragma rtGlobals=1		// Use modern global access method.#include "MatrixOperations2"#include "wname"Macro LoadsasimData(prefix,thePath,imesh)	String prefix,thePath="_New Path_"	Variable imesh=2	Prompt prefix,"prefix for data file"	Prompt thePath,"path name",popup,PathList("*",";","")+"_New Path_"	Prompt imesh,"uniform mesh ?",popup,"yes;no"	PauseUpdate;Silent 1		String fname0,prefix0	String wvname,mapwvname,xmeshnm,ymeshnm,xmeshnm2,ymeshnm2	if (CmpStr(thePath, "_New Path_") == 0)		// user selected new path ?		NewPath/O sasimdata			// this brings up dialog and creates or overwrites path		thePath = "sasimdata"	endif	prefix0=wname(prefix)	// read main data	fname0=prefix+".dat"	wvname="MS_"+prefix0//	if(strlen(fname)<=0)//		Open /D/R/P=$pathname ref//		filename = S_filename//	endif	print "loading ",fname0	LoadMatrixWave(wvname,fname0,thePath,imesh,2,1)// read map data	fname0=prefix+".map.dat"	mapwvname="MSM_"+prefix0	print "loading ",fname0	LoadMatrixWave(mapwvname,fname0,thePath,imesh,2,1)// read xmesh data	fname0=prefix+".xmesh.dat"	// read	print "loading ",fname0	LoadWave/J/D/W/N/O/K=0/P=$thePath fname0	xmeshnm="xmesh_"+prefix0	Duplicate/O $(StringFromList(0,S_wavenames)),$xmeshnm	$xmeshnm *=1e-6 // comvert micron unit	SetScale d 0,0,"m",$xmeshnm	if(imesh !=1)		xmeshnm2="xmesh2_"+prefix		MakeMeshDataForNonUnifMesh(xmeshnm,xmeshnm2)	endif		// read ymesh data	fname0=prefix+".ymesh.dat"	// read	ymeshnm="ymesh_"+prefix0	print "loading ",fname0	LoadWave/J/D/W/N/O/K=0/P=$thePath fname0	Duplicate/O $(StringFromList(0,S_wavenames)),$ymeshnm	$ymeshnm *=1e-6 // comvert micron unit	SetScale d 0,0,"m",$ymeshnm	if(imesh !=1)		ymeshnm2="ymesh2_"+prefix		MakeMeshDataForNonUnifMesh(ymeshnm,ymeshnm2)	endif	// display almost everything	Display	if(imesh==1)		AppendCounter $wvname		AppendImage $mapwvname	else		AppendMatrixContour $wvname vs {$xmeshnm,$ymeshnm}		AppendImage $mapwvname vs {$xmeshnm2,$ymeshnm2}	Endif	ModifyImage $mapwvname ctab= {*,*,Grays,1}End Macro