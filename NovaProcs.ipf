#pragma rtGlobals=1		// Use modern global access method.#include "MatrixOperations2"#include "wname"// NovaProcs by J. Motohisa// some macros to work with matrix wave// ver 0.01 2006/11/03 initial versionMacro NovaLoadData(wvname,filename,pathname)	String wvname,filename,pathname//	Variable nwvf=1	PauseUpdate;Silent 1	Variable ref,nx,ny,skips,iw	String w0,buffer,wvname2		if (strlen(fileName)<=0)		Open /D/R/P=$pathName/T="sGBWTEXT" ref		fileName= S_fileName	endif	print fileName	Open /R/P=$pathName/T="sGBWTEXT" ref as fileName	FReadLine ref,buffer	nx = str2num(GetStrFromList(buffer,0,"\t"))	ny = str2num(GetStrFromList(buffer,1,"\t"))	Close ref		skips=2	LoadWave/G/D/W/M/L={0,(skips),0,0,0}/P=$pathName filename	if(V_flag==0)		return	endif	iw=0	do		w0 = GetStrFromList(S_waveNames,iw,";")		if(strlen(w0)<1) then			break		endif		if (strlen(wvname)<1)			wvname2="M"+wname(fileName)+num2str(iw)		else			wvname2=wvname+num2str(iw)		endif//		print w0,wvname2		Duplicate/O $w0,$wvname2		KillWaves $w0		MatrixTranspose $wvname2		iw+=1	while(1)End Macro// load xmesh and ymesh dataMacro NovaLoadMeshData(filename,pathname)	String filename="XYmesh",pathname="_New Path_"	Prompt filename,"file name for meshdata"	Prompt pathname, "Name of path containing text files", popup PathList("*", ";", "")+"_New Path_"//	Variable nwvf=1	PauseUpdate;Silent 1	Variable ref,nx,ny,skips,iw	String w0,buffer,wvname		if (CmpStr(pathname, "_New Path_") == 0)		// user selected new path ?		NewPath/O data			// this brings up dialog and creates or overwrites path		pathname = "data"	endif	if (strlen(fileName)<=0)		Open /D/R/P=$pathName/T="sGBWTEXT" ref		fileName= S_fileName	endif	print fileName	Open /R/P=$pathName/T="sGBWTEXT" ref as fileName	FReadLine ref,buffer	nx = str2num(GetStrFromList(buffer,0,"\t"))	ny = str2num(GetStrFromList(buffer,1,"\t"))	Close ref// load xmesh		skips=1	LoadWave/G/A/D/L={0,(skips),nx,0,0}/P=$pathName filename	if(V_flag==0)		return	endif	w0 = GetStrFromList(S_waveNames,0,";")	wvname="xmesh"	Duplicate/O $w0,$wvname	KillWaves $w0	// load ymesh	skips=1+nx	LoadWave/G/A/D/L={0,(skips),ny,0,0}/P=$pathName filename	if(V_flag==0)		return	endif	w0 = GetStrFromList(S_waveNames,0,";")	wvname="ymesh"	Duplicate/O $w0,$wvname	KillWaves $w0End