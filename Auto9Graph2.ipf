#pragma rtGlobals=1		// Use modern global access method.#include "MatrixOperations2"// Auto9Graph2.ipf//		based on Auto9Graph//	11/06/09 ver. 0.2 by J. Motohisa////	revision history//		??/??/??	ver 0.1	first version based on "Auto9graph"//		05/07/08	ver 0.2	version used for long time//		11/06/09	ver 0.3a1	compatible with x-wave and matrix wave	// To Do: Macro Initialize9Graphs(prefix,ysuffix,xsuffix,graphName,LayoutName,index)	String prefix = "W",ysuffix="_1", xsuffix="_0" // xsuffix="_none_"	String graphName = "tmpgraphs",LayoutName = "LayoutOf9"	Variable index=0		String/G g_graphName = graphName,g_layoutName = layoutName	String/G g_xsuffix=xsuffix,g_ysuffix=ysuffix,g_prefix=prefix	Variable/G g_index=index	layout9graphs()End MacroMacro disp9graphs2(start,prefix,ysuffix,xsuffix,pflag)	String prefix=g_prefix,xsuffix=g_xsuffix,ysuffix=g_ysuffix	Variable start=g_index,pflag=1	prompt start,"start"	prompt prefix,"Display waves starting with..."	prompt ysuffix,"Display waves ending with..."	prompt xsuffix,"suffix for x-wave"	prompt pflag,"automatically print layout ?",popup,"yes;no"	PauseUpdate; Silent 1		//building window...		Variable n=start,index=0	String w1,wlist = wavelist(prefix+"*"+ysuffix,";",""),wx	kill9graphs()	do		w1=StringFromList(n,wlist,";")		if(CmpStr(xsuffix,"_none_")!=0)			wx=w1[0,strlen(w1)-strlen(ysuffix)-1]+xsuffix		endif		displaywaves(w1,wx,g_graphName,index)		index+=1		n +=1	while (index<9)	if(strsearch(WinList("*",";","WIN:4"),g_layoutName,0)<0)		layout9graphs()	endif	DoWindow/F $g_layoutName	DoUpdate		if(pflag==1)		PrintLayout $g_layoutName	endif	g_index = start + 9	g_xsuffix = xsuffix	g_ysuffix = ysuffixEndMacroMacro disp9graphs(start,prefix,ysuffix,xsuffix,pflag)	String prefix=g_prefix,ysuffix=g_ysuffix,xsuffix=g_xsuffix	Variable start=g_index,pflag=1	prompt start,"start"	prompt prefix,"Display waves starting with..."	prompt ysuffix,"Display waves ending with..."	prompt xsuffix,"suffix for x-wave"	prompt pflag,"outomatically print layout ?",popup,"yes;no"	PauseUpdate; Silent 1		| building window...		Variable n=start,index=0,failure=0	String w1,wlist = wavelist(prefix+"*"+ysuffix,";",""),wx	kill9graphs()	do		if(CmpStr(xsuffix,"_none_")!=0)			wx=w1[0,strlen(w1)-strlen(ysuffix)-1]+xsuffix		endif		if(WaveExists($w1)==0)			failure +=1		else			displaywaves(w1,wx,g_graphName,index)			index+=1		endif		n+=1	while ((index<9) %& (failure <9))	if(strsearch(WinList("*",";","WIN:4"),g_layoutName,0)<0)		layout9graphs()	endif	DoWindow/F $g_layoutName	DoUpdate		if((pflag==1) %& (failure<9))		PrintLayout $g_layoutName	endif	g_index = n	g_xsuffix = xsuffix	g_ysuffix = ysuffixEndMacroMacro kill9graphs()	PauseUpdate; Silent 1	Variable index	String grname = g_graphname,lname = g_layoutname	String gname	//	Dowindow/K $lname	index=0	do		gname=grname+num2istr(index)		DoWindow/K $gname		index+=1	while(index<9)EndMacroMacro displaywaves(wvname,xwvname,graphName,index)	String wvname,xwvname	String graphName=g_graphname	Variable index=0	Prompt wvname,"Wave Name",popup,WaveList("*",";","")	Prompt graphName,"Graph Name"	Prompt index,"Index"		if(exists(wvname)==1)		if(DimSize($wvname,1)>0)			MatrixWavePlot(wvname,1,1,xwvname)			TextBox/N=text0/F=0/A=MC/X=43/Y=-70 "\\s("+wvname+") "+wvname		else			if(CmpStr(xaxis,"_none_")==0)				Display $wvname			else				Display $wvname vs $xwvname			endif			ModifyGraph/Z rgb[1]=(0,0,65535)			Legend/N=text0/F=0/A=MC/X=43/Y=-70		Endif		DoWindow/C $(graphName+num2istr(index))//		ModifyGraph log(left)=1	endifEndMacroMacro layout9graphs()	PauseUpdate; Silent 1		//building window...		String graphName=g_graphName,layoutName=g_layoutName	String tmp		if(strsearch(WinList("*",";","WIN:4"),layoutName,0)<0)		Layout/P=Landscape/W=(5,42,506,476)//	PrintSettings orientation=1		DoWindow/C $layoutname	else		DoWindow/F $layoutName	endif	tmp = graphname + "0(33,31,286,203)/O=1"; Append $tmp		tmp = graphname+"1(294,31,547,203)/O=1"; Append $tmp	tmp = graphname+"2(555,31,808,203)/O=1"; Append $tmp	tmp = graphname+"3(33,211,286,383)/O=1"; Append $tmp	tmp = graphname+"4(294,211,547,383)/O=1"; Append $tmp	tmp = graphname+"5(555,211,808,383)/O=1"; Append $tmp	tmp = graphname+"6(33,391,286,563)/O=1"; Append $tmp	tmp = graphname+"7(294,391,547,563)/O=1"; Append $tmp	tmp = graphname+"8(555,391,808,563)/O=1"; Append $tmp	EndMacro