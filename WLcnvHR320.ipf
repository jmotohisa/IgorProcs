#pragma rtGlobals=1		// Use modern global access method.Macro PLHR320Conv(wname,cwl)	String wname	variable cwl=800	Prompt wname,"wave name",popup,WaveList("W*",";","")	Prompt cwl,"central wavelength (nm)"	Silent 1; PauseUpDate	String wl="cW_"+wname	variable c0,c1,c2	c0=553.38-cwl*0.076351	c1=-0.68691+cwl*0.00047295	c2=0.0013882-cwl*6.57e-7	Duplicate/O $wname,$wl	$wl = (sqrt(c1*c1-4*c2*(c0-x))-c1)/(2*c2)|	Display $wname vs $wlEnd MacroMacro PLHR320Conv_orig(wname,cwl)	String wname	variable cwl=800	Prompt wname,"wave name",popup,WaveList("W*",";","")	Prompt cwl,"central wavelength (nm)"	Silent 1; PauseUpDate	String wl="cW_"+wname	Duplicate/O $wname,$wl	$wl = (x-0.42105*cwl+526.04)/(1.7661-cwl*6.6659e-4)|	Display $wname vs $wlEnd MacroMacro AppendWLconv(wname1,horizAxis,vertAxis)	String wname1,horizAxis="bottom",vertAxis="left"	Prompt wname1,"wave name",popup,WaveList("W*",";","")	Prompt horizAxis,"horizontal Axis",popup,AxisList("")	Prompt vertAxis,"horizontal Axis",popup,AxisList("")	PauseUpdate;Silent 1		String wname2="cW_"+wname1	AppendToGraph/B=$horizAxis/L=$vertAxis $wname1 vs $wname2EndMacro ModGraphConvWL(grname,wname,cwl)	String grname=WinName(0, 1),wname	Variable cwl	Prompt grname,"Graph to Convert Wavelength",popup,WinList("*",";","WIN:1")	Prompt wname,"Wave name",popup,WaveList("W*",";","WIN:"+grname)	Prompt cwl,"central wavelength"	PauseUpdate; Silent 1		String w0,w0_e,Xaxis,Yaxis,Xaxis_old="left"|	String origWaveList=WaveList("W*",";","WIN:"+grname)|	String rcr,rcr2,srcPat="(x)",destPat|	String origAxisList=AxisList(grname)	Variable index=0,slen	DoWindow/C $grname	|	do	w0 = wname		PLHR320Conv(w0,cwl)		|		w0 = GetStrFromList(origWaveList,index,";")|		if(strlen(w0)==0)|			break|		endif				w0_e="cW_"+w0|		if(strlen(WaveList(w0_e,";",""))==0)|			Duplicate $w0,$w0_e|			$w0_e=1239.8/x|		endif				Xaxis=XAxisOfWave(grname,w0,0)		Yaxis=YAxisOfWave(grname,w0,0)|		rcr=recrstring(grname,w0,0)|		destPat="("+w0+"#"+num2istr(1)+")"|		print srcPat,rcr,destPat|		rcr2=StrSubstitute(srcPat,rcr,destPat)|		slen=strlen(rcr2)|		rcr2[slen-1,slen-1]=""|		Print rcr2		AppendToGraph/B=$Xaxis/L=$Yaxis $w0 vs $w0_e|		ExecuteCmdOnList ("ModifyGraph ",rcr)		RemoveFromGraph $w0#0|		if(cmpstr(Xaxis,Xaxis_old)!=0)|			GetAxis/Q $Xaxis | ;xmin=V_min;xmax=y_max|			SetAxis $Xaxis,1239.8/V_max,1239.8/V_min|			Xaxis_old=Xaxis|		endif|		index+=1|	while(1)End